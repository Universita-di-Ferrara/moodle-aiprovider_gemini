{"version":3,"file":"selectEndpoint.min.js","sources":["../src/selectEndpoint.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Gemini AI Provider - Endpoint Selection JS\n * Updates endpoint URLs based on selected models.\n *\n * @module      aiprovider_gemini/selectEndpoint\n * @copyright   2025 University of Ferrara, Italy\n * @author      Andrea Bertelli <andrea.bertelli@unife.it>\n * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n/**\n * Settings logic for Gemini AI Provider.\n * Updates endpoint URLs based on model selection.\n */\ndefine(['jquery'], function($) {\n    return {\n        init: function() {\n            // Configurazione delle mappature: Nome campo Select -> Nome campo Input -> Suffisso URL\n            const mappings = [\n                {\n                    type: 'text',\n                    select: 'action_generate_text_model',\n                    input: 'action_generate_text_endpoint',\n                    suffix: ':generateContent'\n                },\n                {\n                    type: 'text',\n                    select: 'action_summarise_text_model',\n                    input: 'action_summarise_text_endpoint',\n                    suffix: ':generateContent'\n                },\n                {\n                    type: 'image',\n                    select: 'action_generate_image_model',\n                    input: 'action_generate_image_endpoint',\n                    suffix: ':predict'\n                }\n            ];\n\n            // Itera su ogni configurazione\n            mappings.forEach(function(map) {\n                // Moodle costruisce gli ID delle impostazioni come: id_s_pluginname_settingname\n                const selectId = '#id_s_aiprovider_gemini_' + map.select;\n                const inputId = '#id_s_aiprovider_gemini_' + map.input;\n\n                const $select = $(selectId);\n                const $input = $(inputId);\n\n                // Se entrambi gli elementi esistono nella pagina\n                if ($select.length && $input.length) {\n\n                    // Funzione per aggiornare l'URL\n                    const updateEndpoint = function() {\n                        const model = $select.val();\n                        // Base URL standard per Gemini\n                        const baseUrl = 'https://generativelanguage.googleapis.com/v1beta/models/';\n                        // Costruisci il nuovo URL\n                        const newUrl = baseUrl + model + map.suffix;\n\n                        // Aggiorna il campo input e fa un leggero effetto visivo\n                        $input.val(newUrl).css('background-color', '#e8f0fe').animate({backgroundColor: '#ffffff'}, 500);\n                    };\n\n                    // Aggiungi il listener per il cambio\n                    $select.on('change', updateEndpoint);\n                }\n            });\n        }\n    };\n});\n\n\n"],"names":["define","$","init","type","select","input","suffix","forEach","map","selectId","inputId","$select","$input","length","updateEndpoint","newUrl","val","css","animate","backgroundColor","on"],"mappings":";;;;;;;;;AA4BAA,0CAAO,CAAC,WAAW,SAASC,SACjB,CACHC,KAAM,WAEe,CACb,CACIC,KAAM,OACNC,OAAQ,6BACRC,MAAO,gCACPC,OAAQ,oBAEZ,CACIH,KAAM,OACNC,OAAQ,8BACRC,MAAO,iCACPC,OAAQ,oBAEZ,CACIH,KAAM,QACNC,OAAQ,8BACRC,MAAO,iCACPC,OAAQ,aAKPC,SAAQ,SAASC,WAEhBC,SAAW,2BAA6BD,IAAIJ,OAC5CM,QAAU,2BAA6BF,IAAIH,MAE3CM,QAAUV,EAAEQ,UACZG,OAASX,EAAES,YAGbC,QAAQE,QAAUD,OAAOC,OAAQ,OAG3BC,eAAiB,iBAKbC,OAFU,2DAFFJ,QAAQK,MAIWR,IAAIF,OAGrCM,OAAOI,IAAID,QAAQE,IAAI,mBAAoB,WAAWC,QAAQ,CAACC,gBAAiB,WAAY,MAIhGR,QAAQS,GAAG,SAAUN"}